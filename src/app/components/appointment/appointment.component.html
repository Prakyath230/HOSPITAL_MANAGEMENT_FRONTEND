<section class="appointments">
  <h2>Book Appointment</h2>

  <form *ngIf="!bookingConfirmed" (ngSubmit)="bookAppointment()">
    <input type="text" placeholder="Patient Name" [(ngModel)]="appointmentData.patientName" name="patientName" required />
    <input type="number" placeholder="Age" [(ngModel)]="appointmentData.age" name="age" required />

    <select [(ngModel)]="appointmentData.sex" name="sex" required>
      <option value="" disabled selected>Select Sex</option>
      <option>Male</option>
      <option>Female</option>
      <option>Other</option>
    </select>

    <select [(ngModel)]="appointmentData.department" name="department" (change)="onDepartmentChange()" required>
      <option value="" disabled selected>Select Department</option>
      <option *ngFor="let dept of departments">{{ dept }}</option>
    </select>

    <select [(ngModel)]="appointmentData.doctorId" name="doctorId" required>
      <option value="" disabled selected>Select Doctor</option>
      <option *ngFor="let doc of availableDoctors" [value]="doc.id">{{ doc.name }}</option>
    </select>

    <select [(ngModel)]="appointmentData.day" name="day" required>
      <option value="" disabled selected>Select Day</option>
      <option *ngFor="let d of days">{{ d }}</option>
    </select>

    <select [(ngModel)]="appointmentData.time" name="time" required>
      <option value="" disabled selected>Select Time</option>
      <option *ngFor="let t of times">{{ t }}</option>
    </select>

    <button type="submit">Book Appointment</button>
  </form>

  <div *ngIf="bookingConfirmed" class="confirmation">
    <h3>Appointment Pending!</h3>
    <p>Patient: {{ appointmentData.patientName }}</p>
    <p>Age: {{ appointmentData.age }}, Sex: {{ appointmentData.sex }}</p>
    <p>Department: {{ appointmentData.department }}</p>
    <p>Doctor: {{ appointmentData.doctorId }}</p>
    <p>Day: {{ appointmentData.day }}, Time: {{ appointmentData.time }}</p>
    <button (click)="resetForm()">Book Another Appointment</button>
  </div>
</section>

<app-navbar></app-navbar>
